# 🐛 障害管理リスト

## 📋 未解決の障害

*現在、未解決の障害はありません*

---

## ✅ 解決済みの障害

### 🔴 BUG-001: 乗換案内で本土を経由する経路が表示されている

**報告日**: 2025年1月20日  
**解決日**: 2025年1月21日  
**優先度**: 🔥 高  
**ステータス**: ✅ 完了  

#### 問題の内容
隠岐諸島内での移動を検索すると、わざわざ本土（七類港や境港）を経由する遠回りな経路が表示されてしまいます。

例えば、西郷港から菱浦港への移動で：
- ❌ 西郷 → 七類（本土） → 菱浦（所要時間：半日以上）
- ⭕ 西郷 → 菱浦（フェリーどうぜんで直行：約1時間）

#### 再現方法
1. 乗換案内ページを開く
2. 出発地：西郷、目的地：菱浦を選択
3. 検索ボタンをクリック
4. 結果に本土経由の非効率な経路が含まれている

#### 期待される動作
- 島内移動では、まず直行便を優先表示
- 本土経由は、直行便がない時間帯のみ表示
- 所要時間が極端に長い経路は除外するか、警告を表示

#### 影響
利用者が誤って非効率な経路を選択してしまう可能性があり、旅行計画に大きな支障をきたす。

#### 解決方法
`src/composables/useRouteSearch.ts`の`findTransferRoutes`関数に、島内移動時に本土経由ルートを除外するロジックを追加しました。

```typescript
// Prevent routes that go through mainland when traveling between islands
if (
  !isMainlandPort(departure) &&
  !isMainlandPort(arrival) &&
  (isMainlandPort(firstTrip.arrival) || isMainlandPort(secondTrip.departure))
) {
  continue;
}
```

これにより、島嶼間の移動で本土を経由する非効率な経路が検索結果から除外されるようになりました。

---

## 📖 記載ルール

### 優先度の目安
- 🔥 **高**: サービスの基本機能に影響する重大な問題
- ⚠️ **中**: 使用には支障ないが、改善が必要な問題  
- 💡 **低**: あると良い改善点

### ステータス
- 🆕 **未対応**: まだ何も着手していない
- 🔍 **調査中**: 原因を調査している
- 🔨 **対応中**: 修正作業を実施中
- 🧪 **検証中**: 修正内容を確認中
- ✅ **完了**: 本番環境で修正を確認済み

### 障害IDの付け方
`BUG-XXX` 形式（XXXは3桁の連番）