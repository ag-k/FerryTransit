# 開発ガイドライン

## 会話言語
- Claude Codeとの会話は**常に日本語**で行う

## 開発フロー
1. 機能実装・バグ修正
2. `npm run build` でビルド確認
3. `npm run test:unit` でテスト実行
4. `npm run typecheck` で型チェック
5. `npm run lint` でコード品質確認
6. 必要に応じてテストを追加・修正

## ブランチ戦略
- 現在の作業ブランチ: `dev`
- メインブランチ: `master`
- PR作成時は `master` へマージ

## 重要な制約
### SPA環境
- `/server/api`ディレクトリは使用禁止
- すべてのデータ取得はFirebase Storage/Firestore経由

### TypeScript
- strict mode を維持
- any型の使用は避ける
- 適切な型定義を必ず行う

### UI/UX
- モバイルファーストで設計
- レスポンシブデザイン必須
- ダークモード対応を考慮

### 国際化
- すべてのテキストは i18n 経由
- 新規テキストは ja.json と en.json 両方に追加

### テスト
- 新機能には必ずユニットテストを作成
- 既存機能の修正時はテストも更新

## モバイルアプリ対応
### 下タブナビゲーション（4項目）
1. 時刻表 (TIMETABLE)
2. 乗換案内 (TRANSIT)
3. 運行状況 (STATUS)
4. 設定 (SETTINGS)

## 障害管理
- 障害は `bugs.md` で管理
- 障害ID形式: `BUG-XXX`（3桁連番）
- 優先度: 高(🔥), 中(⚠️), 低(💡)
- ステータス: 未対応(🆕), 調査中(🔍), 対応中(🔨), 検証中(🧪), 完了(✅)

## パフォーマンス最適化
- 遅延ローディングを活用
- 不要な再レンダリングを避ける
- 大量データ表示時は仮想スクロールを検討

## セキュリティ
- APIキー等は環境変数で管理
- Firebaseルールで適切なアクセス制御
- XSS対策を意識したコーディング

## アクセシビリティ
- WCAG 2.1 AA 準拠を目指す
- 適切なARIA属性を付与
- キーボードナビゲーション対応

## コミット
- 意味のある単位でコミット
- コミットメッセージは日本語でも可
- 変更内容が分かりやすいメッセージを心がける